<!DOCTYPE html>
<html lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<title>Виселица</title>
	</head>
	<body>
		<canvas id="canvas" width="300" height="300"></canvas>

<script>
//Набор загадываемых слов
	var wordsArray = [
  	"пирожок",
	  /*"булочка",
	  "конфетка",
	  "яблоко",
	  "шоколадка"*/
	]
//Рандомный выбор загаданного слова
	function wordFromArray(){
		var word = wordsArray[Math.floor(Math.random()*wordsArray.length)]
		return word
	}
//Задаем массив _ _ _ равный длинне слова
	function getAnswerArray(){
		var answerArray = []
		for (i = 0; i < word.length; i++){
			answerArray[i] = "_"
		}
		return answerArray
	}
//Проверяем букву
	function letterCheck(letter) {
		if (letter.length != 1){
			alert("Буква не одна!")
		} else if ( checkDouble(letter) ) {
		    alert("Буква введена повторно!")
		  } else {
			return true
        }
    }
		//проверка введенной буквы на повтор
	function checkDouble(letter) {
      for (i = 0; i < word.length; i++) {
          if (letter === answerArray[i]){
            return true
           }
	    }
	}
//Рисование висилицы
	function mistake(live){
		ctx.strokeStyle
		ctx.lineWidth = 4
		ctx.beginPath()
		if (live == 8){
			ctx.arc(50,50,20,0,Math.PI*2,true)//head
		} else if (live == 7){
				ctx.moveTo(50,70)//body
				ctx.lineTo(50,150)
		} else if (live == 6) {
				ctx.moveTo(50,80)//right hand
				ctx.lineTo(10,110)
		} else if (live == 5){
				ctx.moveTo(50,80)//left hand
				ctx.lineTo(90,110)
		} else if (live == 4){
				ctx.moveTo(50,150)//right leg
				ctx.lineTo(10,200)
		} else if (live == 3){
				ctx.moveTo(50,150)//left leg
				ctx.lineTo(90,200)
		} else if (live == 2){
				ctx.moveTo(50,30)//visilitsa
				ctx.lineTo(50,5)
		} else if (live == 1){
			ctx.moveTo(50,5)
			ctx.lineTo(110,5)
		} else {
			ctx.moveTo(110,5)
			ctx.lineTo(110,200)
		  gameOver()
		}
		ctx.stroke()
	}
//Рисуем слово на холсте
function wordDraw(){
	time = performance.now()
	ctx.clearRect(0,220,300,300)
	ctx.font = "30px Courier"
	ctx.textBaseline = "top"
	ctx.fillText(answerArray.join(" "),0,220)
}

function gameOver(){
	ctx.clearRect(0,0,width,220)
	ctx.font = "30px Courier"
	ctx.textBaseline = "middle"
  ctx.textAlign = "center"
	ctx.fillText("Конец игры!",150,110)
	clearInterval(intervalId)
}

function congratulations(){
	if (lotOfNumber === 0){
	  ctx.clearRect(0,0,width,220)
	  ctx.font = "30px Courier"
	  ctx.textBaseline = "middle"
    ctx.textAlign = "center"
	  ctx.fillText("Победа!",150,110)
	  clearInterval(intervalId)
	}
}
function game(){
	if (lotOfNumber>0 && live>0){
	  letter = (prompt("Введите букву"))//.toLowerCase()
	  if (letter == null){
		  clearInterval(intervalId)
  	} else if (letterCheck(letter)){
			 z = 0
				 for (i = 0; i < word.length; i++) {
					 if (letter === word[i]) {
						answerArray[i] = letter
						z ++
					 }
				 } //проверяем букву в слове меняем z и answerArray

		   	if (z == 0){
				   	live--
					   mistake(live)
				 }
					lotOfNumber-=z
	  }
  }
}
//Задаем необходимые для игры переменные
	word = wordFromArray(wordsArray)
  answerArray = getAnswerArray(word)
  alert("Привет, сыграем в виселицу?" + "\n" + "Я загадал слово: " + answerArray.join(" "))
  live = 9
  lotOfNumber = word.length
	canvas = document.getElementById("canvas")
	ctx = canvas.getContext("2d")
	width = canvas.width
	height = canvas.height
	wordDraw()

intervalId = setInterval(function(){
	game(),
	wordDraw(),
	congratulations()
},100)

</script>
</body>
</html>
